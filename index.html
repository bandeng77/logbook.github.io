<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Logbook - GENETEK</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #8ffff0;
      margin: 0;
      padding: 0;
      display: flex;
    }

    .container {
      display: flex;
      width: 100%;
      padding: 20px;
      box-sizing: border-box;
    }

    .form-section {
      width: 30%;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
      margin-right: 20px;
    }

    .form-section h2 {
      display: flex;
      align-items: center;
      font-size: 24px;
    }

    .form-section h2::before {
      content: 'ðŸ“˜';
      margin-right: 10px;
    }

    .form-section input, .form-section textarea, .form-section button {
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }

    .form-section button {
      background-color: #eee;
      cursor: pointer;
    }

    .logbook-section {
      flex-grow: 1;
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 10px #ccc;
    }

    .logbook-section h2 {
      font-size: 24px;
    }

    .logbook-section h2::before {
      content: 'ðŸ“‹';
      margin-right: 10px;
    }

    video, canvas {
      display: block;
      width: 100%;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="form-section">
      <img src="https://i.imgur.com/OdpQWWD.png" alt="Genetek Logo" style="max-width: 100%; height: auto;">
      <h2>Logbook</h2>
      <input type="datetime-local" id="tanggal">
      <input type="text" id="nama" placeholder="Nama">
      <input type="text" id="perusahaan" placeholder="Nama Perusahaan">
      <textarea id="alamat" placeholder="Alamat Perusahaan"></textarea>
      <input type="text" id="telepon" placeholder="No Telepon">
      <input type="text" id="tujuan" placeholder="Tujuan Kunjungan">

      <button onclick="startCamera()">ðŸ“¸ Ambil Foto</button>
      <video id="video" autoplay style="display:none;"></video>
      <canvas id="canvas" style="display:none;"></canvas>

      <button onclick="tambahLogbook()">+ Tambah ke Logbook</button>
    </div>

    <div class="logbook-section">
      <h2>Daftar Logbook</h2>
      <div id="logbookList"></div>
    </div>
  </div>

  <script>
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    let stream;

    function startCamera() {
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(s => {
          stream = s;
          video.style.display = 'block';
          video.srcObject = stream;

          setTimeout(() => {
            takePhoto();
          }, 2000); // ambil foto otomatis setelah 2 detik
        })
        .catch(err => alert('Kamera tidak tersedia: ' + err));
    }

    function takePhoto() {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0);

      // Stop kamera
      stream.getTracks().forEach(track => track.stop());
      video.style.display = 'none';
      canvas.style.display = 'block';
    }

    function tambahLogbook() {
      const list = document.getElementById('logbookList');
      const foto = canvas.toDataURL();
      const tanggal = document.getElementById('tanggal').value;
      const nama = document.getElementById('nama').value;
      const perusahaan = document.getElementById('perusahaan').value;
      const alamat = document.getElementById('alamat').value;
      const telepon = document.getElementById('telepon').value;
      const tujuan = document.getElementById('tujuan').value;

      const entry = document.createElement('div');
      entry.style.marginBottom = '20px';
      entry.innerHTML = `
        <strong>${tanggal}</strong><br>
        Nama: ${nama}<br>
        Perusahaan: ${perusahaan}<br>
        Alamat: ${alamat}<br>
        Telepon: ${telepon}<br>
        Tujuan: ${tujuan}<br>
        <img src="${foto}" width="150"><hr>
      `;
      list.appendChild(entry);

      // Reset
      document.querySelectorAll('.form-section input, .form-section textarea').forEach(el => el.value = '');
      canvas.style.display = 'none';
    }
  </script>
</body>
</html>
